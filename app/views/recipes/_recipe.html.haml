%article.recipe
  .info
    %h1= recipe.title
    %p= recipe.description

  .ingredients
    = simple_form_for :shopping_list, url: '/shopping_list/update' do |f|
      = render_combined_ingredients(recipe, f)
      = f.button :submit, 'Add to Shopping List' # TODO: add link
      -# TODO: make ajax update on checkbox click

  .steps
    - recipe.recipe_steps.each_with_index do |recipe_step, i|
      %section.recipe-step
        %h3.step-title="Step #{i + 1}"

        - if recipe_step.stepable.class == Recipe
          = render 'sub_recipe', recipe: recipe_step.stepable
        - if recipe_step.stepable.nil?
          Nil Recipe Step, something went wrong
        - else
          = render recipe_step.stepable
      %hr
